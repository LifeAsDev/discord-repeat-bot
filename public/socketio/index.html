<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Socket.IO Test</title>
	</head>
	<body>
		<h1>Socket.IO Test</h1>
		<div id="status">Conectando...</div>

		<!-- Cliente Socket.IO v4 -->
		<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
		<script>
			// Ajusta la URL y path a tu servidor
			const socket = io("http://localhost:3000", {
				path: "/signalling/socket.io",
				transports: ["websocket", "polling"], // fallback
			});

			const status = document.getElementById("status");

			socket.on("connect", () => {
				status.innerText = `Conectado! ID: ${socket.id}`;
				console.log("Conectado a signalling server:", socket.id);
			});

			socket.on("disconnect", (reason) => {
				status.innerText = `Desconectado: ${reason}`;
				console.log("Desconectado:", reason);
			});

			// Mensaje de prueba desde el servidor
			socket.on("test_message", (msg) => {
				console.log("Mensaje del servidor:", msg);
			});

			// Enviar mensaje de prueba
			setTimeout(() => {
				if (socket.connected) {
					socket.emit("test_message", "Hola desde el cliente!");
				}
			}, 2000);
		</script>
	</body>
</html>
